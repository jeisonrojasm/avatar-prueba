<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <!-- <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="https://rawgit.com/schmich/instascan-builds/master/instascan.min.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r126/three.min.js"
        integrity="sha512-n8IpKWzDnBOcBhRlHirMZOUvEq2bLRMuJGjuVqbzUJwtTsgwOgK5aS0c1JA647XWYfqvXve8k3PtZdzpipFjgg=="
        crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/fflate"></script>
    <!-- AFRAME EXTRAS (para animaciones)-->
    <script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.0/dist/aframe-extras.min.js"></script>
    <script src="https://unpkg.com/three@0.126.0/examples/js/loaders/FBXLoader.js"></script>
    <script src="https://unpkg.com/three@0.126.0/examples/js/loaders/GLTFLoader.js"></script>
    <!-- <script>
        const loader = new THREE.GLTFLoader();

        loader.load('../assets/animacion.glb', function (animacion) {
            loader.load('../assets/modelo.glb', function (modelo) {
                console.log(animacion);
                console.log(modelo);
                const scene1 = document.querySelector('body').children[0].object3D;
                const scene2 = new THREE.Scene();
                console.log('ESCENA 1', scene1);
                console.log('ESCENA 2', scene2);

            })
        })
    </script> -->
    <style>
        body {
            margin: 0;
            padding: 0;
        }
    </style>
</head>

<body>
    <!-- <a-scene>
        <a-entity gltf-model="../assets/animacion.glb" scale="2 2 2" position="0 0 -3" animation-mixer></a-entity>
    </a-scene> -->
    <script>
        // Crear la escena, la cámara y el renderizador
        var scene = new THREE.Scene();
        var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        var renderer = new THREE.WebGLRenderer();

        // Configurar el tamaño del renderizador y agregarlo al cuerpo del HTML
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Agregar una luz a la escena
        var light = new THREE.AmbientLight(0xffffff); // Luz blanca ambiental
        scene.add(light);

        // Cargar el modelo GLB
        var loader = new THREE.GLTFLoader();
        loader.load('./assets/modelo.glb', function (gltf) {
            // Agregar el modelo a la escena
            scene.add(gltf.scene);

            // Obtener la animación del modelo
            var animations = gltf.animations;
            if (animations && animations.length) {
                // Crear el objeto Mixer y añadir la animación al mismo
                var mixer = new THREE.AnimationMixer(gltf.scene);
                var animation = mixer.clipAction(animations[0]);

                // Reproducir la animación en bucle
                animation.play();
                animation.setLoop(THREE.LoopRepeat);
            }

            // Ubicar la cámara y renderizar la escena
            camera.position.z = 5;
            // Crear la variable clock
            var clock = new THREE.Clock();
            function animate() {
                requestAnimationFrame(animate);

                // Actualizar el objeto Mixer con el tiempo transcurrido
                if (mixer) mixer.update(clock.getDelta());

                renderer.render(scene, camera);
            }
            animate();
        }, undefined, function (error) {
            console.error(error);
        });
    </script>
</body>

</html>